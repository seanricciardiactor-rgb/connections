<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Connections</title>
  <meta name="theme-color" content="#ffffff" />
  <style>
    :root{
      --bg:#ffffff;
      --tile:#eeede8;
      --tile-border:#e6e5df;
      --tile-text:#111;
      --selected-bg:#5f5f5f;
      --selected-text:#fff;
      --muted:#6b6b6b;
      --btn-border:#111;
      --btn-disabled-border:#d6d6d6;
      --btn-disabled-text:#9a9a9a;
      --yellow:#f5df6b;
      --green:#bfe3a8;
      --blue:#a9d6f5;
      --purple:#d6b0f3;
      --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      background:var(--bg);
      color:#111;
      font-family:var(--font);
      -webkit-font-smoothing: antialiased;
      display:flex;
      justify-content:center;
    }

    .page{
      width:100%;
      max-width:430px;
      padding:0 14px 18px;
    }

    .topbar{
      height:54px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      border-bottom:1px solid #ececec;
      padding:0 2px;
      position:sticky;
      top:0;
      background:#fff;
      z-index:5;
    }

    .instruction{
      text-align:center;
      font-size:22px;
      font-weight:520;
      margin:18px 0 14px;
    }

    .solvedArea{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-bottom:12px;
    }
    .solvedGroup{
      border-radius:10px;
      padding:12px;
      border:1px solid rgba(0,0,0,.06);
      text-align:center;
    }
    .solvedTitle{
      font-weight:900;
      text-transform:uppercase;
      letter-spacing:.6px;
      font-size:13px;
      margin-bottom:6px;
    }
    .solvedList{
      font-weight:800;
      text-transform:uppercase;
      letter-spacing:.5px;
      font-size:12.5px;
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:10px;
    }

    button.tile{
      appearance:none;
      border:1px solid var(--tile-border);
      background:var(--tile);
      color:var(--tile-text);
      border-radius:10px;
      height:60px;
      padding:6px;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      font-weight:800;
      font-size:10.6px; /* reduced slightly to keep long words on one line */
      letter-spacing:0.45px;
      text-transform:uppercase;
      line-height:1.05;
      cursor:pointer;
      user-select:none;
      word-break:keep-all;
      overflow-wrap:normal;
      hyphens:none;
      white-space:normal;
    }
    button.tile.selected{
      background:var(--selected-bg);
      color:var(--selected-text);
      border-color:var(--selected-bg);
    }

    .mistakesRow{
      display:flex;
      justify-content:center;
      gap:12px;
      margin:12px 0;
      font-size:18px;
      font-weight:520;
    }
    .dots{ display:flex; gap:10px; }
    .dot{
      width:14px;height:14px;border-radius:50%;
      background:#111;
    }
    .dot.spent{ opacity:.15; }

    .controls{
      display:flex;
      gap:12px;
    }
    .btn{
      flex:1;
      border-radius:999px;
      padding:12px 10px;
      font-size:16px;
      font-weight:600;
      border:2px solid #111;
      background:#fff;
    }
    .btn:disabled{
      border-color:#d6d6d6;
      color:#9a9a9a;
    }

    .reveal{
      display:none;
      margin-top:18px;
      padding:16px;
      border:1px solid #e6e6e6;
      border-radius:16px;
      text-align:center;
    }
    .reveal.show{ display:block; }
  </style>
</head>
<body>
<main class="page">
  <div class="instruction">Create four groups of four!</div>
  <section class="solvedArea" id="solvedArea"></section>
  <section class="grid" id="grid"></section>
  <div class="mistakesRow">
    <div>Mistakes Remaining:</div>
    <div class="dots" id="dots"></div>
  </div>
  <div class="controls">
    <button class="btn" id="shuffleBtn">Shuffle</button>
    <button class="btn" id="clearBtn" disabled>Deselect All</button>
    <button class="btn" id="submitBtn" disabled>Submit</button>
  </div>
  <div class="reveal" id="reveal">
    <h2>üíç Will you marry me?</h2>
  </div>
</main>

<script>
const CATEGORIES=[
 {color:"yellow",title:"Valentine‚Äôs Day",words:["Heart","Red","Chocolate","Flowers"]},
 {color:"green",title:"2nd Date Movies",words:["Goofy","Jerk","Spaceballs","Cats Don‚Äôt Dance"]},
 {color:"blue",title:"Jesus Meals",words:["Diet Coke","Movie Pretzel","Diet Ginger Ale","Eggplant Parm"]},
 {color:"purple",title:"So Much",words:["Will","You","Marry","Me"]}
];
const COLORS={yellow:"#f5df6b",green:"#bfe3a8",blue:"#a9d6f5",purple:"#d6b0f3"};
let remaining=CATEGORIES.flatMap(c=>c.words.map(w=>({w,c})));
let selected=new Set(), solved=[], mistakes=0;
const grid=document.getElementById("grid"),
      solvedArea=document.getElementById("solvedArea"),
      dots=document.getElementById("dots"),
      clearBtn=document.getElementById("clearBtn"),
      submitBtn=document.getElementById("submitBtn"),
      reveal=document.getElementById("reveal");

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}}
shuffle(remaining);

function render(){
  grid.innerHTML="";
  remaining.forEach(o=>{
    const b=document.createElement("button");
    b.className="tile"+(selected.has(o.w)?" selected":"");
    b.textContent=o.w;
    b.onclick=()=>toggle(o.w);
    grid.appendChild(b);
  });
  dots.innerHTML="";
  for(let i=0;i<4;i++){
    const d=document.createElement("div");
    d.className="dot"+(i<mistakes?" spent":"");
    dots.appendChild(d);
  }
  clearBtn.disabled=selected.size===0;
  submitBtn.disabled=selected.size!==4;
}
function renderSolved(){
  solvedArea.innerHTML="";
  solved.forEach(c=>{
    const box=document.createElement("div");
    box.className="solvedGroup";
    box.style.background=COLORS[c.color];
    box.innerHTML=`<div class="solvedTitle">${c.title}</div>
                   <div class="solvedList">${c.words.join(", ")}</div>`;
    solvedArea.appendChild(box);
  });
}
function toggle(w){
  selected.has(w)?selected.delete(w):selected.size<4&&selected.add(w);
  render();
}
document.getElementById("clearBtn").onclick=()=>{selected.clear();render()};
document.getElementById("submitBtn").onclick=()=>{
  const pick=[...selected];
  const cat=CATEGORIES.find(c=>pick.every(w=>c.words.includes(w)));
  if(!cat){mistakes++;selected.clear();render();return;}
  solved.push(cat);
  remaining=remaining.filter(o=>!cat.words.includes(o.w));
  selected.clear();
  renderSolved();
  render();
  if(solved.length===4)reveal.classList.add("show");
};
document.getElementById("shuffleBtn").onclick=()=>{shuffle(remaining);render()};
render();
</script>
</body>
</html>
